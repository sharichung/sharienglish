<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crazy Kitchen - Three-Course Meal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #f0f9ff;
            color: #333;
            overflow-x: hidden;
        }

        .game-container {
            width: 100%;
            min-height: 100vh;
            position: relative;
            background: linear-gradient(135deg, #c7f9cc, #80ed99, #57cc99);
        }

        .food-item {
            transition: all 0.3s ease;
            cursor: grab;
            user-select: none;
        }

        .food-item:hover {
            transform: translateY(-5px);
        }

        .food-item:active {
            cursor: grabbing;
        }

        .food-icon {
            font-size: 2.5rem;
            line-height: 1;
        }

        .plate {
            background-color: #fff;
            border-radius: 50%;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            position: relative;
            overflow: visible;
        }

        .plate::before {
            content: "üçΩÔ∏è";
            position: absolute;
            font-size: 2rem;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0.2;
            z-index: 0;
        }

        .plate-item {
            position: absolute;
            transition: all 0.3s ease;
            z-index: 10;
            cursor: grab;
        }

        .plate-item:active {
            cursor: grabbing;
        }

        .category-tab {
            transition: all 0.3s ease;
        }

        .category-tab.active {
            background-color: #fff;
            color: #22c55e;
            transform: translateY(-5px);
        }

        .sentence-blank {
            display: inline-block;
            min-width: 100px;
            border-bottom: 3px solid #22c55e;
            text-align: center;
            padding: 0 5px;
            font-weight: bold;
            color: #22c55e;
        }

        .pop-animation {
            animation: pop 0.5s ease-out;
        }

        @keyframes pop {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }

            70% {
                transform: scale(1.1);
                opacity: 1;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .shake-animation {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            50% {
                transform: translateX(5px);
            }

            75% {
                transform: translateX(-5px);
            }
        }

        .bounce-animation {
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .dragging {
            opacity: 0.8;
            transform: scale(1.1);
            z-index: 1000;
        }

        .food-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
        }

        .chef-hat {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 4rem;
            animation: bounce 2s infinite;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        @keyframes fall {
            0% {
                opacity: 1;
                top: -10px;
                transform: translateX(0) rotate(0deg);
            }

            100% {
                opacity: 0;
                top: 100%;
                transform: translateX(100px) rotate(360deg);
            }
        }

        .tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 1000;
            pointer-events: none;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .btn-action {
            transition: all 0.2s ease;
        }

        .btn-action:hover {
            transform: scale(1.05);
        }

        .btn-action:active {
            transform: scale(0.95);
        }

        .speech-bubble {
            position: relative;
            background-color: white;
            border-radius: 20px;
            padding: 15px;
            filter: drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));
        }

        .speech-bubble:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 0;
            border: 15px solid transparent;
            border-top-color: white;
            border-bottom: 0;
            margin-left: -15px;
            margin-bottom: -15px;
        }

        .highlight-text {
            color: #22c55e;
            font-weight: bold;
            display: inline-block;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .sentence-container {
            transition: all 0.5s ease;
        }

        .course-tab {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .course-tab.active {
            background-color: #22c55e;
            color: white;
            transform: translateY(-5px);
        }

        .course-tab.completed {
            background-color: #4ade80;
            color: white;
        }

        .course-tab.completed::after {
            content: "‚úì";
            margin-left: 5px;
        }

        .course-indicator {
            position: absolute;
            top: -10px;
            left: -10px;
            background-color: #22c55e;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            z-index: 20;
        }

        .meal-card {
            transition: all 0.3s ease;
            transform: translateY(20px);
            opacity: 0;
        }

        .meal-card.show {
            transform: translateY(0);
            opacity: 1;
        }

        .presentation-container {
            background-color: rgba(0, 0, 0, 0.8);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .presentation-container.show {
            opacity: 1;
            pointer-events: auto;
        }

        .presentation-content {
            background-color: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .course-image {
            width: 80px;
            height: 80px;
            background-color: #f3f4f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .slide-in {
            animation: slideIn 0.5s forwards;
        }

        @keyframes slideIn {
            from {
                transform: translateY(50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .fade-in {
            animation: fadeIn 1s forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .progress-bar {
            height: 10px;
            background-color: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background-color: #22c55e;
            width: 0%;
            transition: width 0.5s ease;
        }

        .course-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-right: 5px;
        }

        .badge-starter {
            background-color: #fef3c7;
            color: #d97706;
        }

        .badge-main {
            background-color: #dbeafe;
            color: #2563eb;
        }

        .badge-dessert {
            background-color: #fce7f3;
            color: #db2777;
        }
    </style>
    <style>
        *,
        ::before,
        ::after {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        ::backdrop {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        /* ! tailwindcss v3.4.16 | MIT License | https://tailwindcss.com */
        *,
        ::after,
        ::before {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb
        }

        ::after,
        ::before {
            --tw-content: ''
        }

        :host,
        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            tab-size: 4;
            font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            font-feature-settings: normal;
            font-variation-settings: normal;
            -webkit-tap-highlight-color: transparent
        }

        body {
            margin: 0;
            line-height: inherit
        }

        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px
        }

        abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit
        }

        a {
            color: inherit;
            text-decoration: inherit
        }

        b,
        strong {
            font-weight: bolder
        }

        code,
        kbd,
        pre,
        samp {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-feature-settings: normal;
            font-variation-settings: normal;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            letter-spacing: inherit;
            color: inherit;
            margin: 0;
            padding: 0
        }

        button,
        select {
            text-transform: none
        }

        button,
        input:where([type=button]),
        input:where([type=reset]),
        input:where([type=submit]) {
            -webkit-appearance: button;
            background-color: transparent;
            background-image: none
        }

        :-moz-focusring {
            outline: auto
        }

        :-moz-ui-invalid {
            box-shadow: none
        }

        progress {
            vertical-align: baseline
        }

        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        summary {
            display: list-item
        }

        blockquote,
        dd,
        dl,
        figure,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        p,
        pre {
            margin: 0
        }

        fieldset {
            margin: 0;
            padding: 0
        }

        legend {
            padding: 0
        }

        menu,
        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        dialog {
            padding: 0
        }

        textarea {
            resize: vertical
        }

        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af
        }

        [role=button],
        button {
            cursor: pointer
        }

        :disabled {
            cursor: default
        }

        audio,
        canvas,
        embed,
        iframe,
        img,
        object,
        svg,
        video {
            display: block;
            vertical-align: middle
        }

        img,
        video {
            max-width: 100%;
            height: auto
        }

        [hidden]:where(:not([hidden=until-found])) {
            display: none
        }

        .container {
            width: 100%
        }

        @media (min-width: 640px) {
            .container {
                max-width: 640px
            }
        }

        @media (min-width: 768px) {
            .container {
                max-width: 768px
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1024px
            }
        }

        @media (min-width: 1280px) {
            .container {
                max-width: 1280px
            }
        }

        @media (min-width: 1536px) {
            .container {
                max-width: 1536px
            }
        }

        .pointer-events-none {
            pointer-events: none
        }

        .fixed {
            position: fixed
        }

        .absolute {
            position: absolute
        }

        .relative {
            position: relative
        }

        .left-1\/2 {
            left: 50%
        }

        .right-2 {
            right: 0.5rem
        }

        .right-4 {
            right: 1rem
        }

        .top-1\/2 {
            top: 50%
        }

        .top-2 {
            top: 0.5rem
        }

        .top-4 {
            top: 1rem
        }

        .z-50 {
            z-index: 50
        }

        .mx-auto {
            margin-left: auto;
            margin-right: auto
        }

        .my-2 {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem
        }

        .mb-1 {
            margin-bottom: 0.25rem
        }

        .mb-3 {
            margin-bottom: 0.75rem
        }

        .mb-4 {
            margin-bottom: 1rem
        }

        .mb-6 {
            margin-bottom: 1.5rem
        }

        .mr-2 {
            margin-right: 0.5rem
        }

        .mt-1 {
            margin-top: 0.25rem
        }

        .mt-4 {
            margin-top: 1rem
        }

        .mt-6 {
            margin-top: 1.5rem
        }

        .mt-8 {
            margin-top: 2rem
        }

        .flex {
            display: flex
        }

        .grid {
            display: grid
        }

        .hidden {
            display: none
        }

        .aspect-square {
            aspect-ratio: 1 / 1
        }

        .w-full {
            width: 100%
        }

        .max-w-md {
            max-width: 28rem
        }

        .flex-shrink-0 {
            flex-shrink: 0
        }

        .-translate-x-1\/2 {
            --tw-translate-x: -50%;
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        .-translate-y-1\/2 {
            --tw-translate-y: -50%;
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        .transform {
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        .cursor-pointer {
            cursor: pointer
        }

        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr))
        }

        .flex-col {
            flex-direction: column
        }

        .flex-wrap {
            flex-wrap: wrap
        }

        .items-start {
            align-items: flex-start
        }

        .items-center {
            align-items: center
        }

        .justify-center {
            justify-content: center
        }

        .justify-between {
            justify-content: space-between
        }

        .gap-2 {
            gap: 0.5rem
        }

        .gap-3 {
            gap: 0.75rem
        }

        .gap-6 {
            gap: 1.5rem
        }

        .space-y-4> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(1rem * var(--tw-space-y-reverse))
        }

        .space-y-8> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(2rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(2rem * var(--tw-space-y-reverse))
        }

        .overflow-x-auto {
            overflow-x: auto
        }

        .rounded-2xl {
            border-radius: 1rem
        }

        .rounded-3xl {
            border-radius: 1.5rem
        }

        .rounded-full {
            border-radius: 9999px
        }

        .rounded-xl {
            border-radius: 0.75rem
        }

        .border-2 {
            border-width: 2px
        }

        .border-green-200 {
            --tw-border-opacity: 1;
            border-color: rgb(187 247 208 / var(--tw-border-opacity, 1))
        }

        .bg-blue-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(59 130 246 / var(--tw-bg-opacity, 1))
        }

        .bg-green-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(220 252 231 / var(--tw-bg-opacity, 1))
        }

        .bg-green-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(240 253 244 / var(--tw-bg-opacity, 1))
        }

        .bg-green-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(34 197 94 / var(--tw-bg-opacity, 1))
        }

        .bg-white {
            --tw-bg-opacity: 1;
            background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1))
        }

        .bg-yellow-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(234 179 8 / var(--tw-bg-opacity, 1))
        }

        .p-2 {
            padding: 0.5rem
        }

        .p-3 {
            padding: 0.75rem
        }

        .p-4 {
            padding: 1rem
        }

        .p-6 {
            padding: 1.5rem
        }

        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem
        }

        .px-6 {
            padding-left: 1.5rem;
            padding-right: 1.5rem
        }

        .px-8 {
            padding-left: 2rem;
            padding-right: 2rem
        }

        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem
        }

        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem
        }

        .py-4 {
            padding-top: 1rem;
            padding-bottom: 1rem
        }

        .pb-4 {
            padding-bottom: 1rem
        }

        .text-center {
            text-align: center
        }

        .text-2xl {
            font-size: 1.5rem;
            line-height: 2rem
        }

        .text-3xl {
            font-size: 1.875rem;
            line-height: 2.25rem
        }

        .text-4xl {
            font-size: 2.25rem;
            line-height: 2.5rem
        }

        .text-lg {
            font-size: 1.125rem;
            line-height: 1.75rem
        }

        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem
        }

        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem
        }

        .font-bold {
            font-weight: 700
        }

        .italic {
            font-style: italic
        }

        .text-blue-500 {
            --tw-text-opacity: 1;
            color: rgb(59 130 246 / var(--tw-text-opacity, 1))
        }

        .text-gray-400 {
            --tw-text-opacity: 1;
            color: rgb(156 163 175 / var(--tw-text-opacity, 1))
        }

        .text-gray-600 {
            --tw-text-opacity: 1;
            color: rgb(75 85 99 / var(--tw-text-opacity, 1))
        }

        .text-green-700 {
            --tw-text-opacity: 1;
            color: rgb(21 128 61 / var(--tw-text-opacity, 1))
        }

        .text-red-500 {
            --tw-text-opacity: 1;
            color: rgb(239 68 68 / var(--tw-text-opacity, 1))
        }

        .text-white {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1))
        }

        .opacity-0 {
            opacity: 0
        }

        .shadow-lg {
            --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-xl {
            --tw-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .drop-shadow-lg {
            --tw-drop-shadow: drop-shadow(0 10px 8px rgb(0 0 0 / 0.04)) drop-shadow(0 4px 3px rgb(0 0 0 / 0.1));
            filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)
        }

        .transition-opacity {
            transition-property: opacity;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .duration-500 {
            transition-duration: 500ms
        }

        .hover\:text-gray-600:hover {
            --tw-text-opacity: 1;
            color: rgb(75 85 99 / var(--tw-text-opacity, 1))
        }

        @media (min-width: 768px) {
            .md\:inline {
                display: inline
            }

            .md\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr))
            }

            .md\:text-5xl {
                font-size: 3rem;
                line-height: 1
            }
        }

        @media (min-width: 1024px) {
            .lg\:col-span-2 {
                grid-column: span 2 / span 2
            }

            .lg\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr))
            }
        }
    </style>
</head>

<body data-new-gr-c-s-check-loaded="14.1240.0" data-gr-ext-installed="">
    <div class="game-container">
        <div class="chef-hat">üë®‚Äçüç≥</div>

        <!-- Header -->
        <header class="py-4 px-6 flex justify-between items-center">
            <h1 class="text-4xl md:text-5xl font-bold text-white drop-shadow-lg">Crazy Kitchen</h1>
            <div class="flex gap-3">
                <button id="clearPlateBtn"
                    class="btn-action bg-white text-red-500 rounded-full p-3 shadow-lg flex items-center gap-2">
                    <span class="text-xl">üóëÔ∏è</span>
                    <span class="font-bold hidden md:inline">Clear Plate</span>
                </button>
                <button id="newMealBtn"
                    class="btn-action bg-white text-blue-500 rounded-full p-3 shadow-lg flex items-center gap-2">
                    <span class="text-xl">üîÑ</span>
                    <span class="font-bold hidden md:inline">New Meal</span>
                </button>
            </div>
        </header>

        <div class="container mx-auto px-4 py-2">
            <!-- Course Selection Tabs -->
            <div class="flex justify-center mb-6">
                <div class="bg-white rounded-full shadow-lg p-2 flex gap-2">
                    <div id="starterTab" class="course-tab active px-6 py-3 rounded-full font-bold"
                        data-course="starter">
                        ü•ó Starter
                    </div>
                    <div id="mainTab" class="course-tab px-6 py-3 rounded-full font-bold" data-course="main">
                        üç≤ Main Course
                    </div>
                    <div id="dessertTab" class="course-tab px-6 py-3 rounded-full font-bold" data-course="dessert">
                        üç∞ Dessert
                    </div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="max-w-md mx-auto mb-6">
                <div class="flex justify-between text-sm font-bold text-white mb-1">
                    <span>Course 1: Starter</span>
                    <span id="progressText">1/3</span>
                </div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 33%"></div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Food Selection Area -->
                <div class="lg:col-span-2 bg-white rounded-3xl shadow-xl p-6">
                    <!-- Category Tabs -->
                    <div class="flex overflow-x-auto pb-4 gap-3 mb-6">
                        <div class="category-tab active flex-shrink-0 bg-green-100 rounded-full px-6 py-3 font-bold text-green-700 cursor-pointer"
                            data-category="starters" style="display: block;">
                            ü•ó Starters
                        </div>
                        <div class="category-tab flex-shrink-0 bg-green-100 rounded-full px-6 py-3 font-bold text-green-700 cursor-pointer"
                            data-category="proteins" style="display: block;">
                            ü•© Proteins
                        </div>
                        <div class="category-tab flex-shrink-0 bg-green-100 rounded-full px-6 py-3 font-bold text-green-700 cursor-pointer"
                            data-category="vegetables" style="display: block;">
                            ü•¶ Vegetables
                        </div>
                        <div class="category-tab flex-shrink-0 bg-green-100 rounded-full px-6 py-3 font-bold text-green-700 cursor-pointer"
                            data-category="sides" style="display: block;">
                            üçö Sides
                        </div>
                        <div class="category-tab flex-shrink-0 bg-green-100 rounded-full px-6 py-3 font-bold text-green-700 cursor-pointer"
                            data-category="fruits" style="display: none;">
                            üçé Fruits
                        </div>
                        <div class="category-tab flex-shrink-0 bg-green-100 rounded-full px-6 py-3 font-bold text-green-700 cursor-pointer"
                            data-category="desserts" style="display: none;">
                            üç¶ Desserts
                        </div>
                        <div class="category-tab flex-shrink-0 bg-green-100 rounded-full px-6 py-3 font-bold text-green-700 cursor-pointer"
                            data-category="drinks" style="display: none;">
                            ü•§ Drinks
                        </div>
                    </div>

                    <!-- Food Grid -->
                    <div id="foodGrid" class="food-grid">
                        <!-- Food items will be loaded here -->
                    </div>
                </div>

                <!-- Plate and Sentence Builder Area -->
                <div class="bg-white rounded-3xl shadow-xl p-6 flex flex-col">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-green-700" id="currentCourseTitle">My Starter</h2>
                        <span id="courseIndicator" class="course-badge badge-starter">Starter</span>
                    </div>

                    <!-- Plate -->
                    <div class="plate w-full aspect-square mb-6 relative" id="plate">
                        <!-- Food items will be placed here -->
                    </div>

                    <!-- Sentence Builder -->
                    <div class="bg-green-50 rounded-2xl p-4 border-2 border-green-200">
                        <h3 class="text-xl font-bold text-green-700 mb-3">My Sentences:</h3>

                        <div class="space-y-4 text-lg sentence-container" id="sentenceContainer">
                            <p id="sentence1">"I made a <span id="courseType">starter</span> with <span id="food1"
                                    class="sentence-blank">___</span>, <span id="food2"
                                    class="sentence-blank">___</span>, and <span id="food3"
                                    class="sentence-blank">___</span>."</p>

                            <p id="sentence2">"It tastes <span id="taste" class="sentence-blank">___</span>."</p>
                        </div>

                        <div class="flex justify-center mt-4 gap-3">
                            <button id="speakBtn"
                                class="btn-action bg-green-500 text-white rounded-full py-3 px-6 font-bold flex items-center gap-2">
                                <span class="text-xl">üó£Ô∏è</span>
                                <span>Speak It!</span>
                            </button>

                            <button id="nextCourseBtn"
                                class="btn-action bg-blue-500 text-white rounded-full py-3 px-6 font-bold flex items-center gap-2">
                                <span>Next Course</span>
                                <span class="text-xl">‚û°Ô∏è</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Completed Courses Display -->
            <div class="mt-8" id="completedCoursesContainer">
                <h2 class="text-2xl font-bold text-white mb-4 text-center">My Three-Course Meal</h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Starter Card -->
                    <div id="starterCard" class="meal-card bg-white rounded-2xl shadow-xl p-4 opacity-0">
                        <div class="flex items-center mb-3">
                            <div class="course-badge badge-starter">Starter</div>
                            <h3 class="text-xl font-bold">My Starter</h3>
                        </div>
                        <div id="starterItems" class="flex flex-wrap gap-2 mb-3">
                            <!-- Starter items will be added here -->
                            <div class="text-gray-400">Not created yet</div>
                        </div>
                        <p id="starterDescription" class="text-gray-600 italic">
                            <!-- Starter description will be added here -->
                        </p>
                    </div>

                    <!-- Main Course Card -->
                    <div id="mainCard" class="meal-card bg-white rounded-2xl shadow-xl p-4 opacity-0">
                        <div class="flex items-center mb-3">
                            <div class="course-badge badge-main">Main Course</div>
                            <h3 class="text-xl font-bold">My Main Course</h3>
                        </div>
                        <div id="mainItems" class="flex flex-wrap gap-2 mb-3">
                            <!-- Main course items will be added here -->
                            <div class="text-gray-400">Not created yet</div>
                        </div>
                        <p id="mainDescription" class="text-gray-600 italic">
                            <!-- Main course description will be added here -->
                        </p>
                    </div>

                    <!-- Dessert Card -->
                    <div id="dessertCard" class="meal-card bg-white rounded-2xl shadow-xl p-4 opacity-0">
                        <div class="flex items-center mb-3">
                            <div class="course-badge badge-dessert">Dessert</div>
                            <h3 class="text-xl font-bold">My Dessert</h3>
                        </div>
                        <div id="dessertItems" class="flex flex-wrap gap-2 mb-3">
                            <!-- Dessert items will be added here -->
                            <div class="text-gray-400">Not created yet</div>
                        </div>
                        <p id="dessertDescription" class="text-gray-600 italic">
                            <!-- Dessert description will be added here -->
                        </p>
                    </div>
                </div>

                <!-- Present Meal Button (initially hidden) -->
                <div class="flex justify-center mt-6">
                    <button id="presentMealBtn"
                        class="btn-action bg-yellow-500 text-white rounded-full py-4 px-8 font-bold text-xl flex items-center gap-3 opacity-0 pointer-events-none transition-opacity duration-500">
                        <span class="text-2xl">‚ú®</span>
                        <span>Present My Meal!</span>
                        <span class="text-2xl">‚ú®</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Tooltip -->
        <div id="tooltip" class="tooltip"></div>

        <!-- Speech Bubble (initially hidden) -->
        <div id="speechBubble"
            class="speech-bubble fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 max-w-md hidden">
            <p id="speechText" class="text-lg"></p>
            <button class="absolute top-2 right-2 text-gray-400 hover:text-gray-600"
                onclick="document.getElementById('speechBubble').classList.add('hidden')">‚úï</button>
        </div>

        <!-- Presentation Modal -->
        <div id="presentationContainer" class="presentation-container">
            <div class="presentation-content">
                <button id="closePresentation"
                    class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl">√ó</button>

                <h2 class="text-3xl font-bold text-center mb-6">My Delicious Three-Course Meal</h2>

                <div class="space-y-8">
                    <!-- Starter Presentation -->
                    <div id="starterPresentation" class="flex items-start opacity-0">
                        <div class="course-image">ü•ó</div>
                        <div>
                            <h3 class="text-xl font-bold flex items-center">
                                <span class="course-badge badge-starter mr-2">Starter</span>
                                <span id="starterPresentationTitle">Delicious Starter</span>
                            </h3>
                            <p id="starterPresentationDesc" class="my-2">
                                <!-- Starter presentation text will be added here -->
                            </p>
                            <div id="starterPresentationItems" class="flex flex-wrap gap-2 mt-1">
                                <!-- Starter items will be added here -->
                            </div>
                        </div>
                    </div>

                    <!-- Main Course Presentation -->
                    <div id="mainPresentation" class="flex items-start opacity-0">
                        <div class="course-image">üç≤</div>
                        <div>
                            <h3 class="text-xl font-bold flex items-center">
                                <span class="course-badge badge-main mr-2">Main Course</span>
                                <span id="mainPresentationTitle">Hearty Main Course</span>
                            </h3>
                            <p id="mainPresentationDesc" class="my-2">
                                <!-- Main course presentation text will be added here -->
                            </p>
                            <div id="mainPresentationItems" class="flex flex-wrap gap-2 mt-1">
                                <!-- Main course items will be added here -->
                            </div>
                        </div>
                    </div>

                    <!-- Dessert Presentation -->
                    <div id="dessertPresentation" class="flex items-start opacity-0">
                        <div class="course-image">üç∞</div>
                        <div>
                            <h3 class="text-xl font-bold flex items-center">
                                <span class="course-badge badge-dessert mr-2">Dessert</span>
                                <span id="dessertPresentationTitle">Sweet Dessert</span>
                            </h3>
                            <p id="dessertPresentationDesc" class="my-2">
                                <!-- Dessert presentation text will be added here -->
                            </p>
                            <div id="dessertPresentationItems" class="flex flex-wrap gap-2 mt-1">
                                <!-- Dessert items will be added here -->
                            </div>
                        </div>
                    </div>

                    <!-- Final Speech -->
                    <div id="finalSpeech" class="bg-green-50 rounded-xl p-6 border-2 border-green-200 mt-8 opacity-0">
                        <h3 class="text-xl font-bold text-green-700 mb-3">My Presentation Speech:</h3>
                        <p id="finalSpeechText" class="text-lg italic">
                            <!-- Final speech will be added here -->
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game data
        const gameData = {
            currentCourse: 'starter', // starter, main, dessert
            completedCourses: {
                starter: null,
                main: null,
                dessert: null
            },
            plateItems: [],
            draggedItem: null,
            dragOffset: {
                x: 0,
                y: 0
            }
        };

        // Food items by category with taste properties
        const foodItems = {
            "starters": [{
                    name: "Salad",
                    emoji: "ü•ó",
                    tastes: ["fresh", "crunchy"]
                },
                {
                    name: "Soup",
                    emoji: "üç≤",
                    tastes: ["warm", "savory"]
                },
                {
                    name: "Bruschetta",
                    emoji: "üçû",
                    tastes: ["crunchy", "savory"]
                },
                {
                    name: "Shrimp",
                    emoji: "üç§",
                    tastes: ["savory", "seafood"]
                },
                {
                    name: "Mozzarella",
                    emoji: "üßÄ",
                    tastes: ["creamy", "mild"]
                },
                {
                    name: "Olives",
                    emoji: "ü´í",
                    tastes: ["salty", "tangy"]
                },
                {
                    name: "Hummus",
                    emoji: "ü•ô",
                    tastes: ["creamy", "savory"]
                },
                {
                    name: "Spring Roll",
                    emoji: "ü•ü",
                    tastes: ["crunchy", "savory"]
                }
            ],
            "proteins": [{
                    name: "Chicken",
                    emoji: "üçó",
                    tastes: ["savory", "juicy"]
                },
                {
                    name: "Steak",
                    emoji: "ü•©",
                    tastes: ["savory", "rich"]
                },
                {
                    name: "Fish",
                    emoji: "üêü",
                    tastes: ["light", "seafood"]
                },
                {
                    name: "Tofu",
                    emoji: "üßä",
                    tastes: ["mild", "soft"]
                },
                {
                    name: "Eggs",
                    emoji: "ü•ö",
                    tastes: ["savory", "mild"]
                },
                {
                    name: "Bacon",
                    emoji: "ü•ì",
                    tastes: ["salty", "crispy"]
                },
                {
                    name: "Sausage",
                    emoji: "üå≠",
                    tastes: ["savory", "spicy"]
                },
                {
                    name: "Beans",
                    emoji: "ü´ò",
                    tastes: ["earthy", "hearty"]
                }
            ],
            "vegetables": [{
                    name: "Broccoli",
                    emoji: "ü•¶",
                    tastes: ["fresh", "crunchy"]
                },
                {
                    name: "Carrot",
                    emoji: "ü•ï",
                    tastes: ["sweet", "crunchy"]
                },
                {
                    name: "Corn",
                    emoji: "üåΩ",
                    tastes: ["sweet", "juicy"]
                },
                {
                    name: "Tomato",
                    emoji: "üçÖ",
                    tastes: ["sweet", "juicy"]
                },
                {
                    name: "Potato",
                    emoji: "ü•î",
                    tastes: ["starchy", "hearty"]
                },
                {
                    name: "Cucumber",
                    emoji: "ü•í",
                    tastes: ["fresh", "crunchy"]
                },
                {
                    name: "Lettuce",
                    emoji: "ü•¨",
                    tastes: ["fresh", "crisp"]
                },
                {
                    name: "Onion",
                    emoji: "üßÖ",
                    tastes: ["sharp", "pungent"]
                }
            ],
            "sides": [{
                    name: "Rice",
                    emoji: "üçö",
                    tastes: ["plain", "fluffy"]
                },
                {
                    name: "Pasta",
                    emoji: "üçù",
                    tastes: ["savory", "hearty"]
                },
                {
                    name: "Bread",
                    emoji: "üçû",
                    tastes: ["soft", "mild"]
                },
                {
                    name: "Fries",
                    emoji: "üçü",
                    tastes: ["salty", "crispy"]
                },
                {
                    name: "Mashed Potato",
                    emoji: "ü•î",
                    tastes: ["creamy", "hearty"]
                },
                {
                    name: "Couscous",
                    emoji: "üåæ",
                    tastes: ["light", "fluffy"]
                },
                {
                    name: "Noodles",
                    emoji: "üçú",
                    tastes: ["savory", "slippery"]
                },
                {
                    name: "Quinoa",
                    emoji: "üå±",
                    tastes: ["nutty", "healthy"]
                }
            ],
            "fruits": [{
                    name: "Apple",
                    emoji: "üçé",
                    tastes: ["sweet", "crunchy"]
                },
                {
                    name: "Banana",
                    emoji: "üçå",
                    tastes: ["sweet", "soft"]
                },
                {
                    name: "Orange",
                    emoji: "üçä",
                    tastes: ["sweet", "tangy"]
                },
                {
                    name: "Grapes",
                    emoji: "üçá",
                    tastes: ["sweet", "juicy"]
                },
                {
                    name: "Strawberry",
                    emoji: "üçì",
                    tastes: ["sweet", "juicy"]
                },
                {
                    name: "Watermelon",
                    emoji: "üçâ",
                    tastes: ["sweet", "refreshing"]
                },
                {
                    name: "Pineapple",
                    emoji: "üçç",
                    tastes: ["sweet", "tangy"]
                },
                {
                    name: "Peach",
                    emoji: "üçë",
                    tastes: ["sweet", "juicy"]
                }
            ],
            "desserts": [{
                    name: "Ice Cream",
                    emoji: "üç¶",
                    tastes: ["sweet", "cold", "creamy"]
                },
                {
                    name: "Cake",
                    emoji: "üç∞",
                    tastes: ["sweet", "soft"]
                },
                {
                    name: "Donut",
                    emoji: "üç©",
                    tastes: ["sweet", "soft"]
                },
                {
                    name: "Cookie",
                    emoji: "üç™",
                    tastes: ["sweet", "crunchy"]
                },
                {
                    name: "Chocolate",
                    emoji: "üç´",
                    tastes: ["sweet", "rich"]
                },
                {
                    name: "Pie",
                    emoji: "ü•ß",
                    tastes: ["sweet", "flaky"]
                },
                {
                    name: "Pudding",
                    emoji: "üçÆ",
                    tastes: ["sweet", "creamy"]
                },
                {
                    name: "Cupcake",
                    emoji: "üßÅ",
                    tastes: ["sweet", "fluffy"]
                }
            ],
            "drinks": [{
                    name: "Water",
                    emoji: "üíß",
                    tastes: ["plain", "refreshing"]
                },
                {
                    name: "Juice",
                    emoji: "üßÉ",
                    tastes: ["sweet", "fruity"]
                },
                {
                    name: "Soda",
                    emoji: "ü•§",
                    tastes: ["sweet", "fizzy"]
                },
                {
                    name: "Coffee",
                    emoji: "‚òï",
                    tastes: ["bitter", "rich"]
                },
                {
                    name: "Tea",
                    emoji: "üçµ",
                    tastes: ["mild", "soothing"]
                },
                {
                    name: "Milk",
                    emoji: "ü•õ",
                    tastes: ["creamy", "mild"]
                },
                {
                    name: "Smoothie",
                    emoji: "üßã",
                    tastes: ["sweet", "fruity"]
                },
                {
                    name: "Lemonade",
                    emoji: "üçã",
                    tastes: ["sweet", "tangy"]
                }
            ]
        };

        // DOM Elements
        const foodGrid = document.getElementById('foodGrid');
        const plate = document.getElementById('plate');
        const clearPlateBtn = document.getElementById('clearPlateBtn');
        const newMealBtn = document.getElementById('newMealBtn');
        const categoryTabs = document.querySelectorAll('.category-tab');
        const courseTabs = document.querySelectorAll('.course-tab');
        const tooltip = document.getElementById('tooltip');
        const speakBtn = document.getElementById('speakBtn');
        const nextCourseBtn = document.getElementById('nextCourseBtn');
        const sentenceContainer = document.getElementById('sentenceContainer');
        const presentMealBtn = document.getElementById('presentMealBtn');
        const presentationContainer = document.getElementById('presentationContainer');
        const closePresentation = document.getElementById('closePresentation');

        // Course elements
        const courseType = document.getElementById('courseType');
        const currentCourseTitle = document.getElementById('currentCourseTitle');
        const courseIndicator = document.getElementById('courseIndicator');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');

        // Sentence elements
        const food1Element = document.getElementById('food1');
        const food2Element = document.getElementById('food2');
        const food3Element = document.getElementById('food3');
        const tasteElement = document.getElementById('taste');

        // Course cards
        const starterCard = document.getElementById('starterCard');
        const mainCard = document.getElementById('mainCard');
        const dessertCard = document.getElementById('dessertCard');

        // Load foods for category
        function loadFoodsForCategory(category) {
            const foods = foodItems[category];
            foodGrid.innerHTML = '';

            foods.forEach(food => {
                const foodElement = document.createElement('div');
                foodElement.className = 'food-item bg-white rounded-xl shadow-lg p-4 text-center';
                foodElement.dataset.name = food.name;
                foodElement.dataset.emoji = food.emoji;
                foodElement.dataset.tastes = JSON.stringify(food.tastes);
                foodElement.innerHTML = `
                    <div class="food-icon mb-2">${food.emoji}</div>
                    <p class="font-bold">${food.name}</p>
                `;

                // Make draggable
                foodElement.setAttribute('draggable', 'true');

                // Drag events
                foodElement.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', JSON.stringify({
                        name: food.name,
                        emoji: food.emoji,
                        tastes: food.tastes
                    }));
                    foodElement.classList.add('opacity-50');
                });

                foodElement.addEventListener('dragend', () => {
                    foodElement.classList.remove('opacity-50');
                });

                // Touch events for mobile
                foodElement.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const foodRect = foodElement.getBoundingClientRect();

                    gameData.draggedItem = {
                        name: food.name,
                        emoji: food.emoji,
                        tastes: food.tastes,
                        element: createDragElement(food.emoji)
                    };

                    gameData.dragOffset = {
                        x: touch.clientX - foodRect.left,
                        y: touch.clientY - foodRect.top
                    };

                    document.body.appendChild(gameData.draggedItem.element);
                    updateDragElementPosition(touch.clientX, touch.clientY);
                });

                foodGrid.appendChild(foodElement);
            });
        }

        // Create drag element for touch devices
        function createDragElement(emoji) {
            const element = document.createElement('div');
            element.className = 'absolute text-4xl dragging';
            element.style.pointerEvents = 'none';
            element.textContent = emoji;
            return element;
        }

        // Update drag element position
        function updateDragElementPosition(x, y) {
            if (!gameData.draggedItem || !gameData.draggedItem.element) return;

            gameData.draggedItem.element.style.left = `${x - gameData.dragOffset.x}px`;
            gameData.draggedItem.element.style.top = `${y - gameData.dragOffset.y}px`;
        }

        // Setup category tabs
        function setupCategoryTabs() {
            categoryTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Update active tab
                    categoryTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    // Load foods for selected category
                    const category = tab.dataset.category;
                    loadFoodsForCategory(category);
                });
            });
        }

        // Setup course tabs
        function setupCourseTabs() {
            courseTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Check if this course is already completed
                    const course = tab.dataset.course;

                    // Switch to this course
                    switchToCourse(course);
                });
            });
        }

        // Switch to a specific course
        function switchToCourse(course) {
            // Save current plate items to the current course
            if (gameData.plateItems.length > 0) {
                gameData.completedCourses[gameData.currentCourse] = {
                    items: [...gameData.plateItems],
                    taste: tasteElement.textContent
                };

                // Mark the current course tab as completed
                document.getElementById(`${gameData.currentCourse}Tab`).classList.add('completed');

                // Update the course card
                updateCourseCard(gameData.currentCourse);
            }

            // Update current course
            gameData.currentCourse = course;

            // Update UI
            updateCourseUI(course);

            // Update active tab
            courseTabs.forEach(t => t.classList.remove('active'));
            document.getElementById(`${course}Tab`).classList.add('active');

            // Clear plate or load saved items
            if (gameData.completedCourses[course]) {
                // Load saved items
                loadSavedCourse(course);
            } else {
                // Clear plate
                clearPlate();
            }

            // Update progress
            updateProgress();

            // Load appropriate food categories
            loadAppropriateCategories(course);
        }

        // Load appropriate food categories based on course
        function loadAppropriateCategories(course) {
            // Hide all category tabs first
            categoryTabs.forEach(tab => {
                tab.style.display = 'none';
            });

            // Show relevant categories based on course
            if (course === 'starter') {
                showCategories(['starters', 'vegetables', 'sides', 'proteins']);
                categoryTabs[0].click(); // Click on first visible tab
            } else if (course === 'main') {
                showCategories(['proteins', 'vegetables', 'sides', 'starters']);
                categoryTabs[0].click(); // Click on first visible tab
            } else if (course === 'dessert') {
                showCategories(['desserts', 'fruits', 'drinks']);
                categoryTabs[0].click(); // Click on first visible tab
            }
        }

        // Show specific categories
        function showCategories(categories) {
            categoryTabs.forEach(tab => {
                if (categories.includes(tab.dataset.category)) {
                    tab.style.display = 'block';
                }
            });
        }

        // Update course UI
        function updateCourseUI(course) {
            // Update course type in sentence
            courseType.textContent = course === 'main' ? 'main course' : course;

            // Update course title
            currentCourseTitle.textContent =
                `My ${course === 'main' ? 'Main Course' : course.charAt(0).toUpperCase() + course.slice(1)}`;

            // Update course indicator
            courseIndicator.textContent = course === 'main' ? 'Main Course' : course.charAt(0).toUpperCase() + course
                .slice(1);
            courseIndicator.className = `course-badge badge-${course === 'main' ? 'main' : course}`;
        }

        // Load saved course
        function loadSavedCourse(course) {
            const savedCourse = gameData.completedCourses[course];

            // Clear plate
            clearPlate(false);

            // Load saved items
            gameData.plateItems = [];
            savedCourse.items.forEach(item => {
                addFoodToPlate(item.name, item.emoji, item.tastes, null, null, false);
            });

            // Update taste
            tasteElement.textContent = savedCourse.taste;
        }

        // Update course card
        function updateCourseCard(course) {
            const savedCourse = gameData.completedCourses[course];
            if (!savedCourse) return;

            const card = document.getElementById(`${course}Card`);
            const itemsContainer = document.getElementById(`${course}Items`);
            const description = document.getElementById(`${course}Description`);

            // Clear items container
            itemsContainer.innerHTML = '';

            // Add items
            savedCourse.items.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'bg-gray-100 rounded-full px-3 py-1 flex items-center';
                itemElement.innerHTML = `
                    <span class="mr-1">${item.emoji}</span>
                    <span class="text-sm font-medium">${item.name}</span>
                `;
                itemsContainer.appendChild(itemElement);
            });

            // Update description
            description.textContent = `It tastes ${savedCourse.taste}.`;

            // Show card
            card.classList.add('show');

            // Check if all courses are completed
            checkAllCoursesCompleted();
        }

        // Check if all courses are completed
        function checkAllCoursesCompleted() {
            if (gameData.completedCourses.starter &&
                gameData.completedCourses.main &&
                gameData.completedCourses.dessert) {
                // Show present meal button
                presentMealBtn.classList.remove('opacity-0');
                presentMealBtn.classList.add('opacity-100');
                presentMealBtn.classList.remove('pointer-events-none');
                presentMealBtn.classList.add('pointer-events-auto');
            }
        }

        // Update progress
        function updateProgress() {
            let completedCount = 0;
            let totalCount = 3;

            if (gameData.completedCourses.starter) completedCount++;
            if (gameData.completedCourses.main) completedCount++;
            if (gameData.completedCourses.dessert) completedCount++;

            // Add current course if it has items
            if (gameData.plateItems.length > 0 && !gameData.completedCourses[gameData.currentCourse]) {
                completedCount += 0.5;
            }

            const progressPercentage = Math.min(100, Math.round((completedCount / totalCount) * 100));
            progressFill.style.width = `${progressPercentage}%`;
            progressText.textContent = `${Math.ceil(completedCount)}/${totalCount}`;

            // Update course indicator text
            let courseNumber = 1;
            if (gameData.currentCourse === 'main') courseNumber = 2;
            if (gameData.currentCourse === 'dessert') courseNumber = 3;

            const courseText = gameData.currentCourse === 'main' ? 'Main Course' :
                gameData.currentCourse.charAt(0).toUpperCase() + gameData.currentCourse.slice(1);

            document.querySelector('.flex.justify-between.text-sm span:first-child').textContent =
                `Course ${courseNumber}: ${courseText}`;
        }

        // Setup plate drop zone
        function setupPlateDropZone() {
            plate.addEventListener('dragover', (e) => {
                e.preventDefault();
                plate.classList.add('bg-green-50');
            });

            plate.addEventListener('dragleave', () => {
                plate.classList.remove('bg-green-50');
            });

            plate.addEventListener('drop', (e) => {
                e.preventDefault();
                plate.classList.remove('bg-green-50');

                try {
                    const data = JSON.parse(e.dataTransfer.getData('text/plain'));
                    addFoodToPlate(data.name, data.emoji, data.tastes, e.clientX, e.clientY);
                } catch (error) {
                    console.error('Error adding food to plate:', error);
                }
            });
        }

        // Add food to plate
        function addFoodToPlate(name, emoji, tastes, clientX, clientY, updateSentences = true) {
            
            // Limit to 5 items
            if (gameData.plateItems.length >= 5) {
                if (clientX && clientY) {
                    showTooltip('Your plate is full! Remove some items first.', clientX, clientY);
                }
                return;
            }

            const plateRect = plate.getBoundingClientRect();

            // Calculate position relative to plate
            let x, y;

            if (clientX && clientY) {
                x = ((clientX - plateRect.left) / plateRect.width) * 100;
                y = ((clientY - plateRect.top) / plateRect.height) * 100;
            } else {
                // Random position if no coordinates provided
                x = Math.random() * 70 + 15; // 15% to 85%
                y = Math.random() * 70 + 15; // 15% to 85%
            }

            // Ensure position is within bounds
            x = Math.max(10, Math.min(90, x));
            y = Math.max(10, Math.min(90, y));

            // Create food element
            const foodElement = document.createElement('div');
            foodElement.className = 'plate-item pop-animation';
            foodElement.dataset.name = name;
            foodElement.dataset.tastes = JSON.stringify(tastes);
            foodElement.innerHTML = `<span class="text-4xl">${emoji}</span>`;
            foodElement.style.left = `${x}%`;
            foodElement.style.top = `${y}%`;

            // Make draggable within plate
            foodElement.setAttribute('draggable', 'true');

            // Drag events
            foodElement.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', JSON.stringify({
                    name: name,
                    emoji: emoji,
                    tastes: tastes,
                    id: foodElement.id
                }));
                foodElement.classList.add('opacity-50');
            });

            foodElement.addEventListener('dragend', () => {
                foodElement.classList.remove('opacity-50');
            });

            // Double click to remove
            foodElement.addEventListener('dblclick', () => {
                removeFoodFromPlate(foodElement);
            });

            // Add to plate
            plate.appendChild(foodElement);

            // Add to data
            const id = `food-${Date.now()}-${Math.floor(Math.random() * 1000)}`;
            foodElement.id = id;
            gameData.plateItems.push({
                id,
                name,
                emoji,
                tastes,
                element: foodElement
            });

            // Update sentence
            if (updateSentences) {
                updateSentence();

                // Create confetti effect
                createConfetti();
            }

            // Update progress
            updateProgress();
        }

        // Remove food from plate
        function removeFoodFromPlate(element) {
            // Remove from DOM
            element.classList.add('shake-animation');

            setTimeout(() => {
                element.remove();

                // Remove from data
                const index = gameData.plateItems.findIndex(item => item.element === element);
                if (index !== -1) {
                    gameData.plateItems.splice(index, 1);
                }

                // Update sentence
                updateSentence();

                // Update progress
                updateProgress();
            }, 300);
        }

        // Clear plate
        function clearPlate(updateSentences = true) {
            // Animation
            const items = [...plate.querySelectorAll('.plate-item')];

            if (items.length === 0) return;

            items.forEach((item, index) => {
                setTimeout(() => {
                    item.classList.add('shake-animation');

                    setTimeout(() => {
                        item.remove();
                    }, 300);
                }, index * 100);
            });

            // Clear data
            gameData.plateItems = [];

            // Update sentence
            if (updateSentences) {
                setTimeout(() => {
                    updateSentence();
                }, items.length * 100 + 300);
            }

            // Update progress
            updateProgress();
        }

        // Generate taste description based on food items
        function generateTasteDescription() {
            if (gameData.plateItems.length === 0) {
                return "___";
            }

            // Collect all taste properties
            const allTastes = [];
            gameData.plateItems.forEach(item => {
                if (item.tastes) {
                    allTastes.push(...item.tastes);
                }
            });

            // Count occurrences of each taste
            const tasteCounts = {};
            allTastes.forEach(taste => {
                tasteCounts[taste] = (tasteCounts[taste] || 0) + 1;
            });

            // Sort tastes by frequency
            const sortedTastes = Object.keys(tasteCounts).sort((a, b) => tasteCounts[b] - tasteCounts[a]);

            // Check for weird combinations
            const isWeird = checkForWeirdCombination(sortedTastes);
            if (isWeird) {
                return "weird but interesting!";
            }

            // Generate description based on taste frequencies
            if (sortedTastes.length === 0) {
                return "plain";
            } else if (sortedTastes.length === 1) {
                return sortedTastes[0];
            } else if (sortedTastes.length === 2) {
                const mainTaste = sortedTastes[0];
                const secondaryTaste = sortedTastes[1];

                if (tasteCounts[mainTaste] > tasteCounts[secondaryTaste] * 2) {
                    return `mainly ${mainTaste} and a little ${secondaryTaste}`;
                } else {
                    return `${mainTaste} and ${secondaryTaste}`;
                }
            } else {
                // For 3 or more tastes
                const topThreeTastes = sortedTastes.slice(0, 3);

                // If one taste is dominant
                if (tasteCounts[topThreeTastes[0]] > tasteCounts[topThreeTastes[1]] * 2) {
                    return `mostly ${topThreeTastes[0]} with hints of ${topThreeTastes[1]} and ${topThreeTastes[2]}`;
                } else {
                    return `${topThreeTastes[0]}, ${topThreeTastes[1]}, and ${topThreeTastes[2]}`;
                }
            }
        }

        // Check for weird taste combinations
        function checkForWeirdCombination(tastes) {
            // Define conflicting taste pairs
            const conflictingPairs = [
                ['sweet', 'bitter'],
                ['sweet', 'pungent'],
                ['creamy', 'fizzy'],
                ['spicy', 'plain'],
                ['bitter', 'salty']
            ];

            // Check if any conflicting pair exists in the tastes
            for (const [taste1, taste2] of conflictingPairs) {
                if (tastes.includes(taste1) && tastes.includes(taste2)) {
                    return true;
                }
            }

            // Check for too many different tastes (more than 5 different tastes is weird)
            if (tastes.length > 5) {
                return true;
            }

            // Check for unusual category combinations
            const categories = new Set();
            gameData.plateItems.forEach(item => {
                for (const category in foodItems) {
                    if (foodItems[category].some(food => food.name === item.name)) {
                        categories.add(category);
                    }
                }
            });

            // If we have both desserts and vegetables, or desserts and proteins, it's weird
            if ((categories.has('desserts') && categories.has('vegetables')) ||
                (categories.has('desserts') && categories.has('proteins'))) {
                return true;
            }

            return false;
        }

        // Update sentence
        function updateSentence() {
            // Reset
            food1Element.textContent = '___';
            food2Element.textContent = '___';
            food3Element.textContent = '___';

            // Update with plate items
            if (gameData.plateItems.length > 0) {
                food1Element.textContent = gameData.plateItems[0].name;
            }

            if (gameData.plateItems.length > 1) {
                food2Element.textContent = gameData.plateItems[1].name;
            }

            if (gameData.plateItems.length > 2) {
                food3Element.textContent = gameData.plateItems[2].name;
            }

            // Generate and update taste description
            const tasteDescription = generateTasteDescription();
            tasteElement.textContent = tasteDescription;

            // Add highlight animation to taste element
            tasteElement.classList.add('highlight-text');
            setTimeout(() => {
                tasteElement.classList.remove('highlight-text');
            }, 2000);

            // Add animation to sentence container
            sentenceContainer.classList.add('shake-animation');
            setTimeout(() => {
                sentenceContainer.classList.remove('shake-animation');
            }, 500);
        }

        // Create confetti effect
        function createConfetti() {
            const container = document.querySelector('.game-container');
            const colors = ['#FF9AA2', '#FFB7B2', '#FFDAC1', '#E2F0CB', '#B5EAD7', '#C7CEEA'];

            for (let i = 0; i < 20; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.opacity = Math.random();
                confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;

                container.appendChild(confetti);

                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Show tooltip
        function showTooltip(text, x, y) {
            tooltip.textContent = text;
            tooltip.style.left = `${x}px`;
            tooltip.style.top = `${y - 30}px`;
            tooltip.style.opacity = '1';

            setTimeout(() => {
                tooltip.style.opacity = '0';
            }, 2000);
        }

        // Setup touch events for the document
        function setupTouchEvents() {
            document.addEventListener('touchmove', (e) => {
                if (!gameData.draggedItem) return;
                e.preventDefault();

                const touch = e.touches[0];
                updateDragElementPosition(touch.clientX, touch.clientY);
            });

            document.addEventListener('touchend', (e) => {
                if (!gameData.draggedItem) return;

                const touch = e.changedTouches[0];
                const plateRect = plate.getBoundingClientRect();

                // Check if dropped on plate
                if (
                    touch.clientX >= plateRect.left &&
                    touch.clientX <= plateRect.right &&
                    touch.clientY >= plateRect.top &&
                    touch.clientY <= plateRect.bottom
                ) {
                    addFoodToPlate(
                        gameData.draggedItem.name,
                        gameData.draggedItem.emoji,
                        gameData.draggedItem.tastes,
                        touch.clientX,
                        touch.clientY
                    );
                }

                // Remove drag element
                if (gameData.draggedItem.element) {
                    gameData.draggedItem.element.remove();
                }

                gameData.draggedItem = null;
            });
        }

        // Speak button animation
        function setupSpeakButton() {
            speakBtn.addEventListener('click', () => {
                speakBtn.classList.add('shake-animation');

                // Get sentences
                let sentences = [];

                if (food1Element.textContent !== '___') {
                    let sentence =
                        `"I made a ${gameData.currentCourse === 'main' ? 'main course' : gameData.currentCourse} with ${food1Element.textContent}`;

                    if (food2Element.textContent !== '___') {
                        sentence += `, ${food2Element.textContent}`;
                    }

                    if (food3Element.textContent !== '___') {
                        sentence += `, and ${food3Element.textContent}`;
                    }

                    sentence += `."`;
                    sentences.push(sentence);
                }

                if (tasteElement.textContent !== '___') {
                    sentences.push(`"It tastes ${tasteElement.textContent}."`);
                }

                if (sentences.length === 0) {
                    sentences.push('"I need to add some food to my plate!"');
                }

                // Show speech bubble
                const speechBubble = document.getElementById('speechBubble');
                const speechText = document.getElementById('speechText');

                speechText.innerHTML = sentences.join('<br><br>');
                speechBubble.classList.remove('hidden');
                speechBubble.classList.add('pop-animation');

                setTimeout(() => {
                    speakBtn.classList.remove('shake-animation');
                }, 500);

                function showSpeechBubble(text) {
  const bubble = document.getElementById('speechBubble');
  const sentenceContainer = document.getElementById('sentenceContainer');
  const rect = sentenceContainer.getBoundingClientRect();

  bubble.style.position = 'absolute';
  bubble.style.top = `${window.scrollY + rect.bottom + 10}px`;
  bubble.style.left = `${rect.left}px`;
  bubble.style.transform = 'none'; // remove center transform
  bubble.style.display = 'block';
  bubble.classList.remove('hidden');
  document.getElementById('speechText').textContent = text;
}


                // Auto-hide speech bubble after a while
                setTimeout(() => {
                    speechBubble.classList.add('shake-animation');
                    setTimeout(() => {
                        speechBubble.classList.add('hidden');
                        speechBubble.classList.remove('shake-animation');
                    }, 500);
                }, 6000);
            });
        }

        // Setup next course button
        function setupNextCourseButton() {
            nextCourseBtn.addEventListener('click', () => {
                // Check if there are items on the plate
                if (gameData.plateItems.length === 0) {
                    showTooltip('Add some food to your plate first!',
                        nextCourseBtn.getBoundingClientRect().left,
                        nextCourseBtn.getBoundingClientRect().top);
                    return;
                }

                // Save current course
                gameData.completedCourses[gameData.currentCourse] = {
                    items: [...gameData.plateItems],
                    taste: tasteElement.textContent
                };

                // Mark the current course tab as completed
                document.getElementById(`${gameData.currentCourse}Tab`).classList.add('completed');

                // Update the course card
                updateCourseCard(gameData.currentCourse);

                // Move to next course
                let nextCourse;
                if (gameData.currentCourse === 'starter') {
                    nextCourse = 'main';
                } else if (gameData.currentCourse === 'main') {
                    nextCourse = 'dessert';
                } else {
                    // We're done with all courses
                    showTooltip('All courses completed! Click "Present My Meal" to show your creation!',
                        nextCourseBtn.getBoundingClientRect().left,
                        nextCourseBtn.getBoundingClientRect().top);
                    return;
                }

                // Switch to next course
                switchToCourse(nextCourse);

                // Animation
                nextCourseBtn.classList.add('shake-animation');
                setTimeout(() => {
                    nextCourseBtn.classList.remove('shake-animation');
                }, 500);
            });
        }

        // Setup present meal button
        function setupPresentMealButton() {
            presentMealBtn.addEventListener('click', () => {
                // Show presentation modal
                presentationContainer.classList.add('show');

                // Prepare presentation content
                preparePresentationContent();
            });

            // Close presentation button
            closePresentation.addEventListener('click', () => {
                presentationContainer.classList.remove('show');
            });
        }

        // Prepare presentation content
        function preparePresentationContent() {
            // Starter presentation
            const starterPresentation = document.getElementById('starterPresentation');
            const starterPresentationDesc = document.getElementById('starterPresentationDesc');
            const starterPresentationItems = document.getElementById('starterPresentationItems');

            // Main course presentation
            const mainPresentation = document.getElementById('mainPresentation');
            const mainPresentationDesc = document.getElementById('mainPresentationDesc');
            const mainPresentationItems = document.getElementById('mainPresentationItems');

            // Dessert presentation
            const dessertPresentation = document.getElementById('dessertPresentation');
            const dessertPresentationDesc = document.getElementById('dessertPresentationDesc');
            const dessertPresentationItems = document.getElementById('dessertPresentationItems');

            // Final speech
            const finalSpeech = document.getElementById('finalSpeech');
            const finalSpeechText = document.getElementById('finalSpeechText');

            // Reset
            starterPresentationItems.innerHTML = '';
            mainPresentationItems.innerHTML = '';
            dessertPresentationItems.innerHTML = '';

            // Populate starter
            const starter = gameData.completedCourses.starter;
            starterPresentationDesc.textContent =
                `I made a starter with ${starter.items.map(item => item.name).join(', ').replace(/,([^,]*)$/, ' and$1')}. It tastes ${starter.taste}.`;

            starter.items.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'bg-gray-100 rounded-full px-3 py-1 flex items-center';
                itemElement.innerHTML = `
                    <span class="mr-1">${item.emoji}</span>
                    <span class="text-sm font-medium">${item.name}</span>
                `;
                starterPresentationItems.appendChild(itemElement);
            });

            // Populate main course
            const main = gameData.completedCourses.main;
            mainPresentationDesc.textContent =
                `I made a main course with ${main.items.map(item => item.name).join(', ').replace(/,([^,]*)$/, ' and$1')}. It tastes ${main.taste}.`;

            main.items.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'bg-gray-100 rounded-full px-3 py-1 flex items-center';
                itemElement.innerHTML = `
                    <span class="mr-1">${item.emoji}</span>
                    <span class="text-sm font-medium">${item.name}</span>
                `;
                mainPresentationItems.appendChild(itemElement);
            });

            // Populate dessert
            const dessert = gameData.completedCourses.dessert;
            dessertPresentationDesc.textContent =
                `I made a dessert with ${dessert.items.map(item => item.name).join(', ').replace(/,([^,]*)$/, ' and$1')}. It tastes ${dessert.taste}.`;

            dessert.items.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'bg-gray-100 rounded-full px-3 py-1 flex items-center';
                itemElement.innerHTML = `
                    <span class="mr-1">${item.emoji}</span>
                    <span class="text-sm font-medium">${item.name}</span>
                `;
                dessertPresentationItems.appendChild(itemElement);
            });

            // Generate final speech
            const speech = generateFinalSpeech(starter, main, dessert);
            finalSpeechText.textContent = speech;

            // Animate elements
            setTimeout(() => {
                starterPresentation.classList.add('fade-in');

                setTimeout(() => {
                    mainPresentation.classList.add('fade-in');

                    setTimeout(() => {
                        dessertPresentation.classList.add('fade-in');

                        setTimeout(() => {
                            finalSpeech.classList.add('fade-in');
                        }, 1000);
                    }, 1000);
                }, 1000);
            }, 500);
        }

        // Generate final speech
        function generateFinalSpeech(starter, main, dessert) {
            // Get main ingredients
            const starterMainIngredient = starter.items[0]?.name || 'delicious ingredients';
            const mainMainIngredient = main.items[0]?.name || 'tasty foods';
            const dessertMainIngredient = dessert.items[0]?.name || 'sweet treats';

            // Get taste descriptions
            const starterTaste = starter.taste;
            const mainTaste = main.taste;
            const dessertTaste = dessert.taste;

            // Generate a creative name for the meal
            const mealName = generateMealName(starter, main, dessert);

            // Generate speech
            return `Welcome to my restaurant! Today, I'm proud to present my special three-course meal: "${mealName}". We'll start with a ${starterTaste} ${starterMainIngredient} starter, followed by a ${mainTaste} ${mainMainIngredient} main course. And for dessert, I've prepared a ${dessertTaste} ${dessertMainIngredient} that you'll love! Bon app√©tit and enjoy your meal!`;
        }

        // Generate a creative meal name
        function generateMealName(starter, main, dessert) {
            // Get adjectives from taste descriptions
            const starterAdj = getFirstWord(starter.taste);
            const mainAdj = getFirstWord(main.taste);
            const dessertAdj = getFirstWord(dessert.taste);

            // Get main ingredients
            const starterIngredient = starter.items[0]?.name || 'Delight';
            const mainIngredient = main.items[0]?.name || 'Feast';
            const dessertIngredient = dessert.items[0]?.name || 'Treat';

            // Generate name patterns
            const patterns = [
                `The ${starterAdj} ${starterIngredient} Experience`,
                `${mainAdj} ${mainIngredient} Extravaganza`,
                `${dessertAdj} ${dessertIngredient} Trilogy`,
                `${starterIngredient} to ${dessertIngredient} Adventure`,
                `${mainAdj} ${mainIngredient} with ${dessertIngredient} Finale`,
                `Triple Taste Sensation`,
                `${starterIngredient} Starter Surprise`,
                `Chef's ${mainIngredient} Special`
            ];

            return patterns[Math.floor(Math.random() * patterns.length)];
        }

        // Get first word from a string
        function getFirstWord(str) {
            if (!str || str === '___') return 'Delicious';
            return str.split(' ')[0];
        }

        // Generate food tips based on current plate
        function generateFoodTip() {
            const tips = [
                "Try adding some vegetables for a balanced meal!",
                "Sweet and salty foods can taste great together!",
                "Fruits make a healthy dessert!",
                "Try creating a meal from different food groups!",
                "What happens if you mix sweet and spicy foods?",
                "Can you make a meal that tastes weird on purpose?",
                "Try making a colorful plate with different foods!",
                "What's your favorite food combination?",
                "Can you make a meal with foods from every category?",
                "Try making a breakfast, lunch, or dinner plate!"
            ];

            return tips[Math.floor(Math.random() * tips.length)];
        }

        // Initialize
        function init() {
            // Load initial foods for starter
            loadAppropriateCategories('starter');

            // Setup event listeners
            setupCategoryTabs();
            setupCourseTabs();
            setupPlateDropZone();
            setupTouchEvents();
            setupSpeakButton();
            setupNextCourseButton();
            setupPresentMealButton();

            // Clear plate button
            clearPlateBtn.addEventListener('click', () => {
                clearPlate();
            });

            // New meal button
    newMealBtn.addEventListener('click', () => {
        // Reset game
        gameData.completedCourses = {
            starter: null,
            main: null,
            dessert: null
        };

        // Reset course tabs
        courseTabs.forEach(tab => {
            tab.classList.remove('completed');
        });

        // Switch to starter
        switchToCourse('starter');

        // Hide meal cards
        starterCard.classList.remove('show');
        mainCard.classList.remove('show');
        dessertCard.classList.remove('show');

        // Hide present meal button
        presentMealBtn.classList.add('opacity-0');
        presentMealBtn.classList.remove('opacity-100');
        presentMealBtn.classList.add('pointer-events-none');
        presentMealBtn.classList.remove('pointer-events-auto');

        // Create confetti effect
        createConfetti();

        // Show a tip
        const tip = generateFoodTip();
        showTooltip(tip, window.innerWidth / 2, window.innerHeight / 2);
    });
}

        // Start the game
        init();
    </script>

</body>

</html>