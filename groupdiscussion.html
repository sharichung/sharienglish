<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group Discussion Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f9ff;
            color: #333;
            overflow-x: hidden;
        }

        .role-card {
            transition: all 0.3s ease;
            transform-origin: center;
        }

        .role-card.completed {
            border: 3px solid #10b981;
            background-color: #d1fae5;
        }

        .role-card.completed .check-button {
            background-color: #10b981;
            color: white;
        }

        .role-card.completed .role-icon {
            position: relative;
        }

        .role-card.completed .role-icon::after {
            content: "✓";
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #10b981;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        .timer-container {
            position: relative;
            width: 200px;
            height: 200px;
        }

        .timer-circle {
            fill: none;
            stroke-width: 10;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: center;
        }

        .timer-bg {
            stroke: #e2e8f0;
        }

        .timer-progress {
            stroke: #3b82f6;
            transition: stroke-dashoffset 1s linear;
        }

        .reminder {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 50;
            animation: popIn 0.5s ease-out forwards;
        }

        @keyframes popIn {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }

            70% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .topic-card {
            transition: all 0.5s ease;
        }

        .topic-card.active {
            transform: scale(1.05);
            box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.5);
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0;
        }

        @keyframes fall {
            0% {
                opacity: 1;
                top: -10px;
                transform: translateX(0) rotate(0deg);
            }

            100% {
                opacity: 0;
                top: 100%;
                transform: translateX(100px) rotate(360deg);
            }
        }
    </style>
    <style>
        *,
        ::before,
        ::after {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        ::backdrop {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        /* ! tailwindcss v3.4.16 | MIT License | https://tailwindcss.com */
        *,
        ::after,
        ::before {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb
        }

        ::after,
        ::before {
            --tw-content: ''
        }

        :host,
        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            tab-size: 4;
            font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            font-feature-settings: normal;
            font-variation-settings: normal;
            -webkit-tap-highlight-color: transparent
        }

        body {
            margin: 0;
            line-height: inherit
        }

        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px
        }

        abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit
        }

        a {
            color: inherit;
            text-decoration: inherit
        }

        b,
        strong {
            font-weight: bolder
        }

        code,
        kbd,
        pre,
        samp {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-feature-settings: normal;
            font-variation-settings: normal;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            letter-spacing: inherit;
            color: inherit;
            margin: 0;
            padding: 0
        }

        button,
        select {
            text-transform: none
        }

        button,
        input:where([type=button]),
        input:where([type=reset]),
        input:where([type=submit]) {
            -webkit-appearance: button;
            background-color: transparent;
            background-image: none
        }

        :-moz-focusring {
            outline: auto
        }

        :-moz-ui-invalid {
            box-shadow: none
        }

        progress {
            vertical-align: baseline
        }

        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        summary {
            display: list-item
        }

        blockquote,
        dd,
        dl,
        figure,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        p,
        pre {
            margin: 0
        }

        fieldset {
            margin: 0;
            padding: 0
        }

        legend {
            padding: 0
        }

        menu,
        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        dialog {
            padding: 0
        }

        textarea {
            resize: vertical
        }

        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af
        }

        [role=button],
        button {
            cursor: pointer
        }

        :disabled {
            cursor: default
        }

        audio,
        canvas,
        embed,
        iframe,
        img,
        object,
        svg,
        video {
            display: block;
            vertical-align: middle
        }

        img,
        video {
            max-width: 100%;
            height: auto
        }

        [hidden]:where(:not([hidden=until-found])) {
            display: none
        }

        .container {
            width: 100%
        }

        @media (min-width: 640px) {
            .container {
                max-width: 640px
            }
        }

        @media (min-width: 768px) {
            .container {
                max-width: 768px
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1024px
            }
        }

        @media (min-width: 1280px) {
            .container {
                max-width: 1280px
            }
        }

        @media (min-width: 1536px) {
            .container {
                max-width: 1536px
            }
        }

        .absolute {
            position: absolute
        }

        .inset-0 {
            inset: 0px
        }

        .mx-auto {
            margin-left: auto;
            margin-right: auto
        }

        .mb-2 {
            margin-bottom: 0.5rem
        }

        .mb-4 {
            margin-bottom: 1rem
        }

        .mb-6 {
            margin-bottom: 1.5rem
        }

        .mr-2 {
            margin-right: 0.5rem
        }

        .mt-8 {
            margin-top: 2rem
        }

        .mb-1 {
            margin-bottom: 0.25rem
        }

        .mb-3 {
            margin-bottom: 0.75rem
        }

        .block {
            display: block
        }

        .flex {
            display: flex
        }

        .grid {
            display: grid
        }

        .hidden {
            display: none
        }

        .h-40 {
            height: 10rem
        }

        .min-h-\[160px\] {
            min-height: 160px
        }

        .min-h-screen {
            min-height: 100vh
        }

        .w-full {
            width: 100%
        }

        .max-w-md {
            max-width: 28rem
        }

        .flex-1 {
            flex: 1 1 0%
        }

        .list-disc {
            list-style-type: disc
        }

        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr))
        }

        .flex-col {
            flex-direction: column
        }

        .items-center {
            align-items: center
        }

        .justify-center {
            justify-content: center
        }

        .justify-between {
            justify-content: space-between
        }

        .gap-4 {
            gap: 1rem
        }

        .gap-6 {
            gap: 1.5rem
        }

        .space-x-2> :not([hidden])~ :not([hidden]) {
            --tw-space-x-reverse: 0;
            margin-right: calc(0.5rem * var(--tw-space-x-reverse));
            margin-left: calc(0.5rem * calc(1 - var(--tw-space-x-reverse)))
        }

        .rounded-lg {
            border-radius: 0.5rem
        }

        .rounded-xl {
            border-radius: 0.75rem
        }

        .rounded {
            border-radius: 0.25rem
        }

        .border {
            border-width: 1px
        }

        .border-blue-200 {
            --tw-border-opacity: 1;
            border-color: rgb(191 219 254 / var(--tw-border-opacity, 1))
        }

        .border-green-200 {
            --tw-border-opacity: 1;
            border-color: rgb(187 247 208 / var(--tw-border-opacity, 1))
        }

        .border-orange-200 {
            --tw-border-opacity: 1;
            border-color: rgb(254 215 170 / var(--tw-border-opacity, 1))
        }

        .border-purple-200 {
            --tw-border-opacity: 1;
            border-color: rgb(233 213 255 / var(--tw-border-opacity, 1))
        }

        .bg-blue-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(239 246 255 / var(--tw-bg-opacity, 1))
        }

        .bg-blue-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(59 130 246 / var(--tw-bg-opacity, 1))
        }

        .bg-gray-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(107 114 128 / var(--tw-bg-opacity, 1))
        }

        .bg-green-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(240 253 244 / var(--tw-bg-opacity, 1))
        }

        .bg-green-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(34 197 94 / var(--tw-bg-opacity, 1))
        }

        .bg-orange-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(255 247 237 / var(--tw-bg-opacity, 1))
        }

        .bg-purple-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(168 85 247 / var(--tw-bg-opacity, 1))
        }

        .bg-red-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(239 68 68 / var(--tw-bg-opacity, 1))
        }

        .bg-white {
            --tw-bg-opacity: 1;
            background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1))
        }

        .bg-blue-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(219 234 254 / var(--tw-bg-opacity, 1))
        }

        .bg-green-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(220 252 231 / var(--tw-bg-opacity, 1))
        }

        .bg-orange-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(255 237 213 / var(--tw-bg-opacity, 1))
        }

        .bg-purple-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(243 232 255 / var(--tw-bg-opacity, 1))
        }

        .bg-blue-300 {
            --tw-bg-opacity: 1;
            background-color: rgb(147 197 253 / var(--tw-bg-opacity, 1))
        }

        .bg-opacity-50 {
            --tw-bg-opacity: 0.5
        }

        .p-3 {
            padding: 0.75rem
        }

        .p-4 {
            padding: 1rem
        }

        .p-6 {
            padding: 1.5rem
        }

        .p-2 {
            padding: 0.5rem
        }

        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem
        }

        .px-6 {
            padding-left: 1.5rem;
            padding-right: 1.5rem
        }

        .px-8 {
            padding-left: 2rem;
            padding-right: 2rem
        }

        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem
        }

        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem
        }

        .pl-5 {
            padding-left: 1.25rem
        }

        .pl-4 {
            padding-left: 1rem
        }

        .text-left {
            text-align: left
        }

        .text-center {
            text-align: center
        }

        .text-right {
            text-align: right
        }

        .text-2xl {
            font-size: 1.5rem;
            line-height: 2rem
        }

        .text-4xl {
            font-size: 2.25rem;
            line-height: 2.5rem
        }

        .text-5xl {
            font-size: 3rem;
            line-height: 1
        }

        .text-lg {
            font-size: 1.125rem;
            line-height: 1.75rem
        }

        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem
        }

        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem
        }

        .text-3xl {
            font-size: 1.875rem;
            line-height: 2.25rem
        }

        .text-xs {
            font-size: 0.75rem;
            line-height: 1rem
        }

        .font-bold {
            font-weight: 700
        }

        .text-blue-500 {
            --tw-text-opacity: 1;
            color: rgb(59 130 246 / var(--tw-text-opacity, 1))
        }

        .text-blue-600 {
            --tw-text-opacity: 1;
            color: rgb(37 99 235 / var(--tw-text-opacity, 1))
        }

        .text-gray-500 {
            --tw-text-opacity: 1;
            color: rgb(107 114 128 / var(--tw-text-opacity, 1))
        }

        .text-gray-700 {
            --tw-text-opacity: 1;
            color: rgb(55 65 81 / var(--tw-text-opacity, 1))
        }

        .text-green-600 {
            --tw-text-opacity: 1;
            color: rgb(22 163 74 / var(--tw-text-opacity, 1))
        }

        .text-green-800 {
            --tw-text-opacity: 1;
            color: rgb(22 101 52 / var(--tw-text-opacity, 1))
        }

        .text-orange-600 {
            --tw-text-opacity: 1;
            color: rgb(234 88 12 / var(--tw-text-opacity, 1))
        }

        .text-orange-800 {
            --tw-text-opacity: 1;
            color: rgb(154 52 18 / var(--tw-text-opacity, 1))
        }

        .text-purple-600 {
            --tw-text-opacity: 1;
            color: rgb(147 51 234 / var(--tw-text-opacity, 1))
        }

        .text-red-600 {
            --tw-text-opacity: 1;
            color: rgb(220 38 38 / var(--tw-text-opacity, 1))
        }

        .text-white {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1))
        }

        .text-blue-800 {
            --tw-text-opacity: 1;
            color: rgb(30 64 175 / var(--tw-text-opacity, 1))
        }

        .text-gray-600 {
            --tw-text-opacity: 1;
            color: rgb(75 85 99 / var(--tw-text-opacity, 1))
        }

        .text-purple-800 {
            --tw-text-opacity: 1;
            color: rgb(107 33 168 / var(--tw-text-opacity, 1))
        }

        .shadow-2xl {
            --tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            --tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-lg {
            --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .transition {
            transition-property: color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .hover\:bg-blue-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-gray-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(75 85 99 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-green-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(22 163 74 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-purple-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(147 51 234 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-red-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(220 38 38 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-blue-100:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(219 234 254 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-green-100:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(220 252 231 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-orange-100:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(255 237 213 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-purple-100:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(243 232 255 / var(--tw-bg-opacity, 1))
        }

        .focus\:outline-none:focus {
            outline: 2px solid transparent;
            outline-offset: 2px
        }

        .focus\:ring-2:focus {
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)
        }

        .focus\:ring-purple-500:focus {
            --tw-ring-opacity: 1;
            --tw-ring-color: rgb(168 85 247 / var(--tw-ring-opacity, 1))
        }

        @media (min-width: 768px) {
            .md\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr))
            }

            .md\:p-8 {
                padding: 2rem
            }
        }

        @media (min-width: 1024px) {
            .lg\:col-span-2 {
                grid-column: span 2 / span 2
            }

            .lg\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr))
            }
        }
    </style>
</head>

<body data-new-gr-c-s-check-loaded="14.1240.0" data-gr-ext-installed="" data-new-gr-c-s-loaded="14.1240.0">
    <div class="min-h-screen">
        <!-- Main Container -->
        <div id="gameContainer" class="container mx-auto p-4 md:p-8">
            <!-- Header -->
            <header class="text-center mb-6">
                <h1 class="text-4xl font-bold text-blue-600 mb-2">Group Discussion Game 🗣️</h1>
                <p class="text-lg text-blue-500">Interactive tool for Zoom class discussions</p>
            </header>

            <!-- Game Stages -->
            <div id="setupStage" class="bg-white p-6 rounded-xl shadow-lg mb-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Role Assignment Section -->
                    <div>
                        <h2 class="text-2xl font-bold text-purple-600 mb-4">Step 1: Assign Roles</h2>
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Enter student names (one per line):</label>
                            <textarea id="studentNames"
                                class="w-full h-40 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                placeholder="Alice
Brian
Candy
David"></textarea>
                        </div>
                        <button id="assignRolesBtn"
                            class="w-full bg-purple-500 text-white py-3 px-4 rounded-lg text-xl font-bold hover:bg-purple-600 transition flex items-center justify-center">
                            <span class="mr-2">Assign Roles</span> 🎲
                        </button>
                    </div>

                    <!-- Topic Selection Section -->
                    <div>
                        <h2 class="text-2xl font-bold text-green-600 mb-4">Step 2: Select Topic</h2>
                        <div class="mb-4">
                            <p class="text-gray-700 mb-2">Click the button to randomly select a discussion topic:</p>
                            <div id="topicDisplay"
                                class="topic-card bg-green-50 p-6 rounded-lg text-center min-h-[160px] flex items-center justify-center">
                                <p class="text-xl text-green-800">Topic will appear here</p>
                            </div>
                        </div>
                        <button id="selectTopicBtn"
                            class="w-full bg-green-500 text-white py-3 px-4 rounded-lg text-xl font-bold hover:bg-green-600 transition flex items-center justify-center">
                            <span class="mr-2">Select Topic</span> 📝
                        </button>
                    </div>
                </div>
            </div>

            <!-- Discussion Stage (Hidden initially) -->
            <div id="discussionStage" class="hidden">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Left Column: Roles -->
                    <div class="lg:col-span-2">
                        <div class="bg-white p-6 rounded-xl shadow-lg mb-6">
                            <h2 class="text-2xl font-bold text-blue-600 mb-4">Discussion Roles</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="roleCards">
                                <div class="role-card bg-blue-100 border border-blue-200 rounded-lg p-4"
                                    data-student="Candy">
                                    <div class="flex items-center mb-2">
                                        <div class="role-icon text-3xl mr-2">🧠</div>
                                        <div>
                                            <h3 class="font-bold text-blue-800">Idea Giver</h3>
                                            <p class="text-sm text-gray-600">Candy</p>
                                        </div>
                                    </div>
                                    <p class="text-sm mb-2">Gives at least one idea or opinion during the discussion</p>
                                    <div class="bg-white bg-opacity-50 p-2 rounded mb-3">
                                        <p class="text-xs font-bold mb-1">Sentence Frames:</p>
                                        <ul class="text-xs list-disc pl-4">
                                            <li>"I think we should consider..."</li>
                                            <li>"One idea could be..."</li>
                                            <li>"What if we tried...?"</li>
                                        </ul>
                                    </div>
                                    <button
                                        class="check-button w-full bg-white text-blue-800 border border-blue-200 py-2 rounded font-bold hover:bg-blue-100 transition"
                                        onclick="markRoleCompleted('Candy')">
                                        I said my part ✅
                                    </button>
                                </div>

                                <div class="role-card bg-purple-100 border border-purple-200 rounded-lg p-4"
                                    data-student="David">
                                    <div class="flex items-center mb-2">
                                        <div class="role-icon text-3xl mr-2">❓</div>
                                        <div>
                                            <h3 class="font-bold text-purple-800">Question Master</h3>
                                            <p class="text-sm text-gray-600">David</p>
                                        </div>
                                    </div>
                                    <p class="text-sm mb-2">Asks at least one thoughtful question to keep the discussion
                                        going</p>
                                    <div class="bg-white bg-opacity-50 p-2 rounded mb-3">
                                        <p class="text-xs font-bold mb-1">Sentence Frames:</p>
                                        <ul class="text-xs list-disc pl-4">
                                            <li>"I'm wondering about..."</li>
                                            <li>"Could you explain why...?"</li>
                                            <li>"What would happen if...?"</li>
                                        </ul>
                                    </div>
                                    <button
                                        class="check-button w-full bg-white text-purple-800 border border-purple-200 py-2 rounded font-bold hover:bg-purple-100 transition"
                                        onclick="markRoleCompleted('David')">
                                        I said my part ✅
                                    </button>
                                </div>

                                <div class="role-card bg-green-100 border border-green-200 rounded-lg p-4"
                                    data-student="Brian">
                                    <div class="flex items-center mb-2">
                                        <div class="role-icon text-3xl mr-2">✅</div>
                                        <div>
                                            <h3 class="font-bold text-green-800">Agreement Checker</h3>
                                            <p class="text-sm text-gray-600">Brian</p>
                                        </div>
                                    </div>
                                    <p class="text-sm mb-2">Summarizes the group's points at least once</p>
                                    <div class="bg-white bg-opacity-50 p-2 rounded mb-3">
                                        <p class="text-xs font-bold mb-1">Sentence Frames:</p>
                                        <ul class="text-xs list-disc pl-4">
                                            <li>"So far, we've agreed that..."</li>
                                            <li>"It seems like we all think..."</li>
                                            <li>"Let me summarize our main points..."</li>
                                        </ul>
                                    </div>
                                    <button
                                        class="check-button w-full bg-white text-green-800 border border-green-200 py-2 rounded font-bold hover:bg-green-100 transition"
                                        onclick="markRoleCompleted('Brian')">
                                        I said my part ✅
                                    </button>
                                </div>

                                <div class="role-card bg-orange-100 border border-orange-200 rounded-lg p-4"
                                    data-student="Emma">
                                    <div class="flex items-center mb-2">
                                        <div class="role-icon text-3xl mr-2">✋</div>
                                        <div>
                                            <h3 class="font-bold text-orange-800">Time Keeper</h3>
                                            <p class="text-sm text-gray-600">Emma</p>
                                        </div>
                                    </div>
                                    <p class="text-sm mb-2">Reminds the group to move on at least once</p>
                                    <div class="bg-white bg-opacity-50 p-2 rounded mb-3">
                                        <p class="text-xs font-bold mb-1">Sentence Frames:</p>
                                        <ul class="text-xs list-disc pl-4">
                                            <li>"We should move on to discuss..."</li>
                                            <li>"We have limited time, so let's talk about..."</li>
                                            <li>"Let's make sure we cover..."</li>
                                        </ul>
                                    </div>
                                    <button
                                        class="check-button w-full bg-white text-orange-800 border border-orange-200 py-2 rounded font-bold hover:bg-orange-100 transition"
                                        onclick="markRoleCompleted('Emma')">
                                        I said my part ✅
                                    </button>
                                </div>

                                <div class="role-card bg-blue-100 border border-blue-200 rounded-lg p-4"
                                    data-student="Alice">
                                    <div class="flex items-center mb-2">
                                        <div class="role-icon text-3xl mr-2">🧠</div>
                                        <div>
                                            <h3 class="font-bold text-blue-800">Idea Giver</h3>
                                            <p class="text-sm text-gray-600">Alice</p>
                                        </div>
                                    </div>
                                    <p class="text-sm mb-2">Gives at least one idea or opinion during the discussion</p>
                                    <div class="bg-white bg-opacity-50 p-2 rounded mb-3">
                                        <p class="text-xs font-bold mb-1">Sentence Frames:</p>
                                        <ul class="text-xs list-disc pl-4">
                                            <li>"I think we should consider..."</li>
                                            <li>"One idea could be..."</li>
                                            <li>"What if we tried...?"</li>
                                        </ul>
                                    </div>
                                    <button
                                        class="check-button w-full bg-white text-blue-800 border border-blue-200 py-2 rounded font-bold hover:bg-blue-100 transition"
                                        onclick="markRoleCompleted('Alice')">
                                        I said my part ✅
                                    </button>
                                </div>

                                <div class="role-card bg-purple-100 border border-purple-200 rounded-lg p-4"
                                    data-student="Frank">
                                    <div class="flex items-center mb-2">
                                        <div class="role-icon text-3xl mr-2">❓</div>
                                        <div>
                                            <h3 class="font-bold text-purple-800">Question Master</h3>
                                            <p class="text-sm text-gray-600">Frank</p>
                                        </div>
                                    </div>
                                    <p class="text-sm mb-2">Asks at least one thoughtful question to keep the discussion
                                        going</p>
                                    <div class="bg-white bg-opacity-50 p-2 rounded mb-3">
                                        <p class="text-xs font-bold mb-1">Sentence Frames:</p>
                                        <ul class="text-xs list-disc pl-4">
                                            <li>"I'm wondering about..."</li>
                                            <li>"Could you explain why...?"</li>
                                            <li>"What would happen if...?"</li>
                                        </ul>
                                    </div>
                                    <button
                                        class="check-button w-full bg-white text-purple-800 border border-purple-200 py-2 rounded font-bold hover:bg-purple-100 transition"
                                        onclick="markRoleCompleted('Frank')">
                                        I said my part ✅
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Timer and Controls -->
                    <div>
                        <div class="bg-white p-6 rounded-xl shadow-lg mb-6">
                            <h2 class="text-2xl font-bold text-orange-600 mb-4">Discussion Topic</h2>
                            <div id="activeTopic" class="bg-orange-50 p-4 rounded-lg text-center mb-4">
                                <p class="text-xl font-bold text-orange-800">Should schools have longer days but shorter
                                    weeks?</p>
                            </div>

                            <div class="text-center mb-4">
                                <div class="timer-container mx-auto">
                                    <svg width="200" height="200" viewBox="0 0 200 200">
                                        <circle class="timer-circle timer-bg" cx="100" cy="100" r="90"></circle>
                                        <circle id="timerProgress" class="timer-circle timer-progress" cx="100" cy="100"
                                            r="90" stroke-dasharray="565.48" stroke-dashoffset="0"
                                            style="stroke-dashoffset: 0; stroke-dasharray: 565.487;"></circle>
                                    </svg>
                                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                                        <span id="timerDisplay" class="text-4xl font-bold text-blue-600">6:00</span>
                                        <span class="text-sm text-gray-500">minutes remaining</span>
                                    </div>
                                </div>
                            </div>

                            <div class="flex space-x-2">
                                <button id="startTimerBtn"
                                    class="flex-1 text-white py-3 px-4 rounded-lg font-bold transition bg-blue-500 hover:bg-blue-600">
                                    Start Timer
                                </button>
                                <button id="resetTimerBtn"
                                    class="flex-1 bg-gray-500 text-white py-3 px-4 rounded-lg font-bold hover:bg-gray-600 transition">
                                    Reset
                                </button>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h2 class="text-2xl font-bold text-red-600 mb-4">Teacher Controls</h2>
                            <button id="endDiscussionBtn"
                                class="w-full bg-red-500 text-white py-3 px-4 rounded-lg font-bold hover:bg-red-600 transition mb-4">
                                End Discussion
                            </button>
                            <button id="newDiscussionBtn"
                                class="w-full bg-purple-500 text-white py-3 px-4 rounded-lg font-bold hover:bg-purple-600 transition">
                                New Discussion
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Stage (Hidden initially) -->
            <div id="resultsStage" class="hidden">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold text-blue-600 mb-6 text-center">Discussion Results</h2>

                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-green-600 mb-2">Topic:</h3>
                        <p id="resultsTopic" class="text-lg bg-green-50 p-4 rounded-lg">Should junk food be banned from
                            school canteens?</p>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-purple-600 mb-2">Role Completion:</h3>
                        <div id="resultsRoles" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-green-100 border-green-200 border rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <div class="flex items-center">
                                            <span class="text-2xl mr-2">🧠</span>
                                            <h4 class="font-bold">Idea Giver</h4>
                                        </div>
                                        <p class="text-gray-600">Candy</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="text-2xl">✅</span>
                                        <p class="text-sm">Completed</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-green-100 border-green-200 border rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <div class="flex items-center">
                                            <span class="text-2xl mr-2">❓</span>
                                            <h4 class="font-bold">Question Master</h4>
                                        </div>
                                        <p class="text-gray-600">Brian</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="text-2xl">✅</span>
                                        <p class="text-sm">Completed</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-green-100 border-green-200 border rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <div class="flex items-center">
                                            <span class="text-2xl mr-2">✅</span>
                                            <h4 class="font-bold">Agreement Checker</h4>
                                        </div>
                                        <p class="text-gray-600">David</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="text-2xl">✅</span>
                                        <p class="text-sm">Completed</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-green-100 border-green-200 border rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <div class="flex items-center">
                                            <span class="text-2xl mr-2">✋</span>
                                            <h4 class="font-bold">Time Keeper</h4>
                                        </div>
                                        <p class="text-gray-600">Alice</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="text-2xl">✅</span>
                                        <p class="text-sm">Completed</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-green-100 border-green-200 border rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <div class="flex items-center">
                                            <span class="text-2xl mr-2">🧠</span>
                                            <h4 class="font-bold">Idea Giver</h4>
                                        </div>
                                        <p class="text-gray-600">Emma</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="text-2xl">✅</span>
                                        <p class="text-sm">Completed</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-green-100 border-green-200 border rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <div class="flex items-center">
                                            <span class="text-2xl mr-2">❓</span>
                                            <h4 class="font-bold">Question Master</h4>
                                        </div>
                                        <p class="text-gray-600">Frank</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="text-2xl">✅</span>
                                        <p class="text-sm">Completed</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-8">
                        <button id="startNewGameBtn"
                            class="bg-blue-500 text-white py-3 px-8 rounded-lg text-xl font-bold hover:bg-blue-600 transition">
                            Start New Game
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reminder Popup (Hidden initially) -->
        <div id="reminderPopup" class="hidden reminder bg-white p-6 rounded-xl shadow-2xl max-w-md">
            <div class="text-center">
                <div class="text-5xl mb-4">⏰</div>
                <h3 class="text-2xl font-bold text-blue-600 mb-2">Discussion Reminder</h3>
                <p id="reminderText" class="text-lg mb-4">Keep the discussion going!</p>
                <div id="sentenceStarters" class="bg-blue-50 p-4 rounded-lg text-left mb-4">
                    <p class="font-bold mb-2">Try these sentence starters:</p>
                    <ul class="list-disc pl-5">
                        <li>"I think... because..."</li>
                        <li>"I agree/disagree with... because..."</li>
                        <li>"Could you explain more about...?"</li>
                    </ul>
                </div>
                <button id="closeReminderBtn"
                    class="bg-blue-500 text-white py-2 px-6 rounded-lg font-bold hover:bg-blue-600 transition">
                    Continue Discussion
                </button>
            </div>
        </div>
    </div>

    <script>
        // Game data
        const gameData = {
            students: [],
            roles: [{
                    name: "Idea Giver",
                    emoji: "🧠",
                    description: "Gives at least one idea or opinion during the discussion",
                    sentenceFrames: [
                        "I think we should consider...",
                        "One idea could be...",
                        "What if we tried...?"
                    ],
                    color: "blue"
                },
                {
                    name: "Question Master",
                    emoji: "❓",
                    description: "Asks at least one thoughtful question to keep the discussion going",
                    sentenceFrames: [
                        "I'm wondering about...",
                        "Could you explain why...?",
                        "What would happen if...?"
                    ],
                    color: "purple"
                },
                {
                    name: "Agreement Checker",
                    emoji: "✅",
                    description: "Summarizes the group's points at least once",
                    sentenceFrames: [
                        "So far, we've agreed that...",
                        "It seems like we all think...",
                        "Let me summarize our main points..."
                    ],
                    color: "green"
                },
                {
                    name: "Time Keeper",
                    emoji: "✋",
                    description: "Reminds the group to move on at least once",
                    sentenceFrames: [
                        "We should move on to discuss...",
                        "We have limited time, so let's talk about...",
                        "Let's make sure we cover..."
                    ],
                    color: "orange"
                }
            ],
            topics: [
                "Should students wear uniforms to school?",
                "Is homework necessary for learning?",
                "Should mobile phones be allowed in classrooms?",
                "Are school holidays too long or too short?",
                "Should junk food be banned from school canteens?",
                "Is learning a musical instrument important?",
                "Should students choose what they learn in school?",
                "Is reading books better than watching videos?",
                "Should schools have longer days but shorter weeks?",
                "Is learning a foreign language important?"
            ],
            selectedTopic: null,
            assignedRoles: {},
            completedRoles: {},
            timerDuration: 6 * 60, // 6 minutes in seconds
            timerRemaining: 6 * 60,
            timerInterval: null,
            reminderIntervals: [4 * 60, 2 * 60] // Reminders at 4 minutes and 2 minutes remaining
        };

        // DOM Elements
        const studentNamesInput = document.getElementById('studentNames');
        const assignRolesBtn = document.getElementById('assignRolesBtn');
        const selectTopicBtn = document.getElementById('selectTopicBtn');
        const topicDisplay = document.getElementById('topicDisplay');
        const activeTopic = document.getElementById('activeTopic');
        const roleCards = document.getElementById('roleCards');
        const timerDisplay = document.getElementById('timerDisplay');
        const timerProgress = document.getElementById('timerProgress');
        const startTimerBtn = document.getElementById('startTimerBtn');
        const resetTimerBtn = document.getElementById('resetTimerBtn');
        const endDiscussionBtn = document.getElementById('endDiscussionBtn');
        const newDiscussionBtn = document.getElementById('newDiscussionBtn');
        const reminderPopup = document.getElementById('reminderPopup');
        const reminderText = document.getElementById('reminderText');
        const sentenceStarters = document.getElementById('sentenceStarters');
        const closeReminderBtn = document.getElementById('closeReminderBtn');
        const setupStage = document.getElementById('setupStage');
        const discussionStage = document.getElementById('discussionStage');
        const resultsStage = document.getElementById('resultsStage');
        const resultsTopic = document.getElementById('resultsTopic');
        const resultsRoles = document.getElementById('resultsRoles');
        const startNewGameBtn = document.getElementById('startNewGameBtn');

        // Functions
        function assignRoles() {
            const names = studentNamesInput.value.trim().split('\n').filter(name => name.trim() !== '');

            if (names.length < 4) {
                alert('Please enter at least 4 student names (one per line).');
                return;
            }

            gameData.students = names;
            gameData.assignedRoles = {};
            gameData.completedRoles = {};

            // Shuffle roles if more than 4 students
            let rolesToAssign = [...gameData.roles];
            if (names.length > 4) {
                // Some roles will be assigned to multiple students
                while (rolesToAssign.length < names.length) {
                    rolesToAssign = rolesToAssign.concat([...gameData.roles]);
                }
            }

            // Shuffle students
            const shuffledStudents = [...names].sort(() => Math.random() - 0.5);

            // Assign roles
            shuffledStudents.forEach((student, index) => {
                const roleIndex = index % gameData.roles.length;
                gameData.assignedRoles[student] = rolesToAssign[roleIndex];
                gameData.completedRoles[student] = false;
            });

            // Update UI
            updateRoleAssignments();
            selectTopicBtn.disabled = false;

            // Create confetti effect
            createConfetti();
        }

        function updateRoleAssignments() {
            const roleAssignmentHTML = Object.entries(gameData.assignedRoles).map(([student, role]) => {
                const colorClass = `${role.color}-100`;
                const borderClass = `${role.color}-200`;
                const textClass = `${role.color}-800`;

                return `
                    <div class="role-card bg-${colorClass} border border-${borderClass} rounded-lg p-4" data-student="${student}">
                        <div class="flex items-center mb-2">
                            <div class="role-icon text-3xl mr-2">${role.emoji}</div>
                            <div>
                                <h3 class="font-bold text-${textClass}">${role.name}</h3>
                                <p class="text-sm text-gray-600">${student}</p>
                            </div>
                        </div>
                        <p class="text-sm mb-2">${role.description}</p>
                        <div class="bg-white bg-opacity-50 p-2 rounded mb-3">
                            <p class="text-xs font-bold mb-1">Sentence Frames:</p>
                            <ul class="text-xs list-disc pl-4">
                                ${role.sentenceFrames.map(frame => `<li>"${frame}"</li>`).join('')}
                            </ul>
                        </div>
                        <button class="check-button w-full bg-white text-${textClass} border border-${borderClass} py-2 rounded font-bold hover:bg-${colorClass} transition" onclick="markRoleCompleted('${student}')">
                            I said my part ✅
                        </button>
                    </div>
                `;
            }).join('');

            roleCards.innerHTML = roleAssignmentHTML;
        }

        function selectTopic() {
            const randomIndex = Math.floor(Math.random() * gameData.topics.length);
            gameData.selectedTopic = gameData.topics[randomIndex];

            topicDisplay.innerHTML = `<p class="text-2xl font-bold text-green-800">${gameData.selectedTopic}</p>`;
            topicDisplay.classList.add('active');

            // Enable starting the discussion
            setTimeout(() => {
                setupStage.classList.add('hidden');
                discussionStage.classList.remove('hidden');

                // Update active topic
                activeTopic.innerHTML =
                    `<p class="text-xl font-bold text-orange-800">${gameData.selectedTopic}</p>`;

                // Reset timer
                resetTimer();
            }, 1500);
        }

        function startTimer() {
            if (gameData.timerInterval) {
                clearInterval(gameData.timerInterval);
            }

            startTimerBtn.disabled = true;
            startTimerBtn.classList.add('bg-blue-300');
            startTimerBtn.classList.remove('bg-blue-500', 'hover:bg-blue-600');

            const startTime = Date.now();
            const totalDuration = gameData.timerRemaining;

            gameData.timerInterval = setInterval(() => {
                const elapsedSeconds = Math.floor((Date.now() - startTime) / 1000);
                gameData.timerRemaining = Math.max(0, totalDuration - elapsedSeconds);

                updateTimerDisplay();

                // Check for reminder times
                if (gameData.reminderIntervals.includes(gameData.timerRemaining)) {
                    showReminder(gameData.timerRemaining);
                }

                // Check if timer is complete
                if (gameData.timerRemaining <= 0) {
                    clearInterval(gameData.timerInterval);
                    gameData.timerInterval = null;
                    showTimeUpReminder();
                }
            }, 1000);
        }

        function resetTimer() {
            if (gameData.timerInterval) {
                clearInterval(gameData.timerInterval);
                gameData.timerInterval = null;
            }

            gameData.timerRemaining = gameData.timerDuration;
            updateTimerDisplay();

            startTimerBtn.disabled = false;
            startTimerBtn.classList.remove('bg-blue-300');
            startTimerBtn.classList.add('bg-blue-500', 'hover:bg-blue-600');
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameData.timerRemaining / 60);
            const seconds = gameData.timerRemaining % 60;
            timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

            // Update progress circle
            const circumference = 2 * Math.PI * 90; // 2πr
            const offset = circumference * (1 - gameData.timerRemaining / gameData.timerDuration);
            timerProgress.style.strokeDashoffset = offset;
        }

        function showReminder(timeRemaining) {
            // Pause timer
            if (gameData.timerInterval) {
                clearInterval(gameData.timerInterval);
                gameData.timerInterval = null;
            }

            const minutes = Math.floor(timeRemaining / 60);
            reminderText.textContent = `${minutes} minutes remaining! Keep the discussion going!`;

            // Update sentence starters based on remaining time
            let starters;
            if (timeRemaining === 4 * 60) { // 4 minutes remaining
                starters = [
                    "I think... because...",
                    "I agree/disagree with... because...",
                    "Could you explain more about...?"
                ];
            } else { // 2 minutes remaining
                starters = [
                    "To summarize our main points...",
                    "We haven't discussed... yet",
                    "Let's make sure everyone has spoken"
                ];
            }

            const startersHTML = `
                <p class="font-bold mb-2">Try these sentence starters:</p>
                <ul class="list-disc pl-5">
                    ${starters.map(starter => `<li>"${starter}"</li>`).join('')}
                </ul>
            `;
            sentenceStarters.innerHTML = startersHTML;

            reminderPopup.classList.remove('hidden');
        }

        function showTimeUpReminder() {
            reminderText.textContent = `Time's up! Let's wrap up the discussion.`;

            const startersHTML = `
                <p class="font-bold mb-2">Final thoughts:</p>
                <ul class="list-disc pl-5">
                    <li>"In conclusion..."</li>
                    <li>"The main points we discussed were..."</li>
                    <li>"Thank you for sharing your ideas!"</li>
                </ul>
            `;
            sentenceStarters.innerHTML = startersHTML;

            closeReminderBtn.textContent = "End Discussion";
            closeReminderBtn.onclick = endDiscussion;

            reminderPopup.classList.remove('hidden');
        }

        function closeReminder() {
            reminderPopup.classList.add('hidden');

            // Resume timer if not ended
            if (gameData.timerRemaining > 0) {
                startTimer();
            }
        }

        function markRoleCompleted(student) {
            gameData.completedRoles[student] = true;

            // Update UI
            const roleCard = document.querySelector(`.role-card[data-student="${student}"]`);
            if (roleCard) {
                roleCard.classList.add('completed');
            }
        }

        function endDiscussion() {
            // Hide reminder if visible
            reminderPopup.classList.add('hidden');

            // Stop timer
            if (gameData.timerInterval) {
                clearInterval(gameData.timerInterval);
                gameData.timerInterval = null;
            }

            // Show results
            discussionStage.classList.add('hidden');
            resultsStage.classList.remove('hidden');

            // Update results content
            resultsTopic.textContent = gameData.selectedTopic;

            const resultsHTML = Object.entries(gameData.assignedRoles).map(([student, role]) => {
                const completed = gameData.completedRoles[student];
                const statusClass = completed ? 'bg-green-100 border-green-200' : 'bg-red-50 border-red-200';
                const statusIcon = completed ? '✅' : '❌';
                const statusText = completed ? 'Completed' : 'Not completed';

                return `
                    <div class="${statusClass} border rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="flex items-center">
                                    <span class="text-2xl mr-2">${role.emoji}</span>
                                    <h4 class="font-bold">${role.name}</h4>
                                </div>
                                <p class="text-gray-600">${student}</p>
                            </div>
                            <div class="text-right">
                                <span class="text-2xl">${statusIcon}</span>
                                <p class="text-sm">${statusText}</p>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            resultsRoles.innerHTML = resultsHTML;

            // Create confetti for celebration
            createConfetti();
        }

        function startNewGame() {
            // Reset game data
            gameData.selectedTopic = null;
            gameData.assignedRoles = {};
            gameData.completedRoles = {};
            gameData.timerRemaining = gameData.timerDuration;

            // Reset UI
            resultsStage.classList.add('hidden');
            setupStage.classList.remove('hidden');
            topicDisplay.innerHTML = `<p class="text-xl text-green-800">Topic will appear here</p>`;
            topicDisplay.classList.remove('active');
            selectTopicBtn.disabled = true;
        }

        function newDiscussion() {
            // Stop timer
            if (gameData.timerInterval) {
                clearInterval(gameData.timerInterval);
                gameData.timerInterval = null;
            }

            // Hide discussion stage
            discussionStage.classList.add('hidden');
            setupStage.classList.remove('hidden');

            // Reset topic selection
            gameData.selectedTopic = null;
            topicDisplay.innerHTML = `<p class="text-xl text-green-800">Topic will appear here</p>`;
            topicDisplay.classList.remove('active');
        }

        function createConfetti() {
            const container = document.getElementById('gameContainer');
            const colors = ['#FF9AA2', '#FFB7B2', '#FFDAC1', '#E2F0CB', '#B5EAD7', '#C7CEEA'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.opacity = Math.random();
                confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;

                container.appendChild(confetti);

                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Event Listeners
        assignRolesBtn.addEventListener('click', assignRoles);
        selectTopicBtn.addEventListener('click', selectTopic);
        startTimerBtn.addEventListener('click', startTimer);
        resetTimerBtn.addEventListener('click', resetTimer);
        endDiscussionBtn.addEventListener('click', endDiscussion);
        newDiscussionBtn.addEventListener('click', newDiscussion);
        closeReminderBtn.addEventListener('click', closeReminder);
        startNewGameBtn.addEventListener('click', startNewGame);

        // Initialize with sample data
        studentNamesInput.value = "Alice\nBrian\nCandy\nDavid\nEmma\nFrank";

        // Initialize timer display
        updateTimerDisplay();

        // Set up timer progress circle
        const circumference = 2 * Math.PI * 90;
        timerProgress.style.strokeDasharray = circumference;
        timerProgress.style.strokeDashoffset = 0;

        // Global function for role completion buttons
        window.markRoleCompleted = markRoleCompleted;
    </script>

</body>

</html>